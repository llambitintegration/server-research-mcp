# ============================================================================
# OBSIDIAN CREW MCP - ENHANCED CONFIGURATION
# ============================================================================
# This configuration file provides comprehensive control over the Research
# Paper Parsing Crew, including interactive startup options and directory
# management to eliminate static location programming issues.

# ============================================================================
# LLM PROVIDER CONFIGURATION
# ============================================================================

# Set LLM_PROVIDER to choose between providers: 'openai' or 'anthropic'
LLM_PROVIDER=anthropic

# OpenAI Configuration (if using openai provider)
OPENAI_API_KEY=sk-proj---

# Anthropic Configuration (if using anthropic provider)
ANTHROPIC_API_KEY=sk-ant-api03--

# Optional: Override default models
LLM_MODEL=claude-3-haiku-20240307

# Optional: Override rate limits (requests per minute)
# LLM_RATE_LIMIT=30

# ============================================================================
# RATE LIMITING CONFIGURATION
# ============================================================================

# Zotero API Rate Limits (conservative to avoid 429 errors)
MCP_ZOTERO_MAX_REQUESTS_PER_MINUTE=5
MCP_ZOTERO_MAX_REQUESTS_PER_HOUR=50
MCP_ZOTERO_MIN_REQUEST_INTERVAL=2.0
MCP_ZOTERO_MAX_RETRIES=5
MCP_ZOTERO_INITIAL_RETRY_DELAY=3.0
MCP_ZOTERO_MAX_RETRY_DELAY=60.0
MCP_ZOTERO_BACKOFF_FACTOR=2.0

# LLM Rate Limits (adjust based on your plan)
LLM_MAX_REQUESTS_PER_MINUTE=20
LLM_MAX_REQUESTS_PER_HOUR=200
LLM_MIN_REQUEST_INTERVAL=0.5
LLM_MAX_RETRIES=5
LLM_INITIAL_RETRY_DELAY=1.0
LLM_MAX_RETRY_DELAY=30.0
LLM_BACKOFF_FACTOR=2.0

# Memory Server Rate Limits (can be higher)
MCP_MEMORY_MAX_REQUESTS_PER_MINUTE=60
MCP_MEMORY_MAX_REQUESTS_PER_HOUR=600
MCP_MEMORY_MIN_REQUEST_INTERVAL=0.1
MCP_MEMORY_MAX_RETRIES=3
MCP_MEMORY_INITIAL_RETRY_DELAY=0.5

# Filesystem Rate Limits (minimal restrictions)
MCP_FILESYSTEM_MAX_REQUESTS_PER_MINUTE=100
MCP_FILESYSTEM_MAX_REQUESTS_PER_HOUR=1000
MCP_FILESYSTEM_MIN_REQUEST_INTERVAL=0.05
MCP_FILESYSTEM_MAX_RETRIES=3
MCP_FILESYSTEM_INITIAL_RETRY_DELAY=0.2

# Sequential Thinking Rate Limits
MCP_SEQUENTIAL_THINKING_MAX_REQUESTS_PER_MINUTE=30
MCP_SEQUENTIAL_THINKING_MAX_REQUESTS_PER_HOUR=300
MCP_SEQUENTIAL_THINKING_MIN_REQUEST_INTERVAL=0.5
MCP_SEQUENTIAL_THINKING_MAX_RETRIES=3
MCP_SEQUENTIAL_THINKING_INITIAL_RETRY_DELAY=1.0

# ============================================================================
# STARTUP BEHAVIOR CONFIGURATION
# ============================================================================

# Interactive Startup Options
ENABLE_STARTUP_PROMPTS=true
ENABLE_DIRECTORY_DIALOGS=true
ENABLE_PROCESSING_GUIDANCE=true

# Default Startup Processing Guidance
STARTUP_PROCESSING_PROMPT="Pick a paper in the Unfiled items folder. Use zotero-mcp to extract contents and start the crew."

# Alternative: Static processing instructions (used when ENABLE_PROCESSING_GUIDANCE=false)
DEFAULT_PROCESSING_INSTRUCTIONS="Extract key findings, methodology, and citations from research papers."

# ============================================================================
# DIRECTORY CONFIGURATION
# ============================================================================

# Core Working Directories
WORKING_DIRECTORY=./
OUTPUT_DIRECTORY=output
LOGS_DIRECTORY=logs

# Research Papers and Documents
PAPERS_DIR=papers
KNOWLEDGE_DIR=knowledge
TRAINING_DATA_DIR=knowledge/training/data
# ============================================================================
# MCP SERVER DIRECTORY CONFIGURATION - WORKING PATHS
# ============================================================================
# Based on working Cursor mcp.json configuration

# Filesystem MCP Server - Matching working Cursor config
FILESYSTEM_MCP_ROOT_DIR=C:\\0_repos
FILESYSTEM_MCP_CWD=C:\\0_repos\\mcp\\Crews\\obsidianCrew-mcp

# Paper Search Server
PAPER_SEARCH_SERVER_DIR=C:/0_repos/mcp/mcpServers/paper-search-mcp

# Obsidian Integration
OBSIDIAN_VAULT_PATH=C:\\0_repos\\mcp\\Obsidian
OBSIDIAN_API_KEY=d
OBSIDIAN_HOST=https://127.0.0.1:27124
OBSIDIAN_MCP_SERVER_PATH=

# ============================================================================
# ZOTERO INTEGRATION CONFIGURATION
# ============================================================================

# Zotero API Configuration - Using working API key
ZOTERO_API_KEY=d671c4b78373312164e17382726a29669233cf32f496cab34712c0b3e158d26d
ZOTERO_LIBRARY_ID=17381274
ZOTERO_LOCAL=false

# Zotero Data Directory (for local integration)
ZOTERO_DATA_DIR=

# Zotero Collection Settings
ZOTERO_COLLECTION=unfiled_items
ZOTERO_SORT=dateAdded
ZOTERO_DIRECTION=desc
ZOTERO_LIMIT=10

# ============================================================================
# RESEARCH PAPER PROCESSING CONFIGURATION
# ============================================================================

# Default Paper Processing
PAPER_PATH=
DEFAULT_PAPER_FOCUS=methodology,results,conclusions

# Paper Format Support
SUPPORTED_FORMATS=pdf,txt,md,docx
MAX_PAPER_SIZE_MB=50

# ============================================================================
# MCP INTEGRATION SETTINGS
# ============================================================================

# Enable/disable MCP integration
USE_MCP=true

# MCP Server Timeout Settings
MCP_SERVER_TIMEOUT=30
MCP_INITIALIZATION_TIMEOUT=60

# MCP Server Selection (comma-separated list)
ENABLED_MCP_SERVERS=memory,sequential-thinking,context7,zotero,filesystem,paper-search-server

# ============================================================================
# INTERACTIVE STARTUP PROMPTS CONFIGURATION
# ============================================================================

# Directory Selection Prompts
PROMPT_PAPERS_DIRECTORY=true
PROMPT_OUTPUT_DIRECTORY=true
PROMPT_OBSIDIAN_VAULT=true

# Processing Configuration Prompts
PROMPT_PAPER_SELECTION=true
PROMPT_PROCESSING_FOCUS=true
PROMPT_OUTPUT_FORMAT=true

# Dialog Default Titles
DIALOG_TITLE_PAPERS="Select Papers Directory"
DIALOG_TITLE_OUTPUT="Select Output Directory"
DIALOG_TITLE_VAULT="Select Obsidian Vault Directory"

# ============================================================================
# TRAINING CONFIGURATION
# ============================================================================

# Training Parameters
TRAINING_ITERATIONS=5
TRAINING_FILENAME=trained_agents_data.pkl
ENABLE_TRAINING_VALIDATION=true

# Training Data Sources
TRAINING_PAPERS_DIR=knowledge/papers
TRAINING_OUTPUT_DIR=knowledge/training

# ============================================================================
# QUALITY CONTROL & VALIDATION
# ============================================================================

# Quality Control Settings
ENABLE_QUALITY_VALIDATION=true
QUALITY_THRESHOLD=0.8
ENABLE_SCHEMA_VALIDATION=true

# Output Validation
VALIDATE_CITATIONS=true
VALIDATE_REFERENCES=true
CHECK_DUPLICATE_CONTENT=true

# ============================================================================
# EXTERNAL SERVICES
# ============================================================================

# Search Services
SERPER_DEV_API_KEY=

# Additional Research APIs
SEMANTIC_SCHOLAR_API_KEY=
ARXIV_API_RATE_LIMIT=3

# ============================================================================
# LOGGING & DEBUGGING
# ============================================================================

# Logging Configuration
LOG_LEVEL=INFO
ENABLE_DEBUG_LOGGING=false
LOG_FILE_MAX_SIZE_MB=10
LOG_ROTATION_BACKUP_COUNT=5

# Development & Debug Features
ENABLE_STACK_TRACE=true
SAVE_DEBUG_DATA=false
ENABLE_PERFORMANCE_METRICS=false

# ============================================================================
# ADVANCED CONFIGURATION
# ============================================================================

# Performance Settings
MAX_CONCURRENT_PAPERS=3
CHUNK_SIZE_KB=512
MEMORY_LIMIT_MB=2048

# Cache Settings
ENABLE_CACHING=true
CACHE_EXPIRY_HOURS=24
CACHE_DIRECTORY=.cache

# Experimental Features
ENABLE_EXPERIMENTAL_FEATURES=false
EXPERIMENTAL_AI_MODELS=false
ENABLE_PARALLEL_PROCESSING=false
